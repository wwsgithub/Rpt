(function(){if(!a){var a=(function(){var g={};var b="theia";var d=[];var c=200;var f;g[b]={IE:/msie/i.test(navigator.userAgent),E:function(h){if(typeof h==="string"){return document.getElementById(h)}else{return h}},C:function(h){var i;h=h.toUpperCase();if(h=="TEXT"){i=document.createTextNode("")}else{if(h=="BUFFER"){i=document.createDocumentFragment()}else{i=document.createElement(h)}}return i},log:function(){var n,m=arguments,j=m.length,i=[].slice.apply(m,[0,j]),k="error",h;while(i[--j]){if(i[j] instanceof Error){n=i.splice(j,1)[0];break}}if(!n){n=new Error();k="log"}h=[i,k,new Date().getTime(),n.message,n.stack];if(f){try{f.apply(null,h)}catch(o){}}else{d.length>=c&&d.shift();d.push(h)}},_regLogFn:function(h){f=h},_clearLogList:function(){return d.splice(0,d.length)}};var e=g[b];e.register=function(m,h,l){if(!l||typeof l!="string"){l=b}if(!g[l]){g[l]={}}var j=g[l];var o=m.split(".");var n=j;var i=null;while(i=o.shift()){if(o.length){if(n[i]===undefined){n[i]={}}n=n[i]}else{if(n[i]===undefined){try{if(l&&l!==b){if(m==="core.util.listener"){n[i]=g[b].core.util.listener;return true}if(m==="core.util.connect"){n[i]=g[b].core.util.connect;return true}}n[i]=h(j);return true}catch(p){setTimeout(function(){console.log(p)},0)}}}}return false};e.unRegister=function(l,j){if(!j||typeof j!="string"){j=b}var i=g[j];var n=l.split(".");var m=i;var h=null;while(h=n.shift()){if(n.length){if(m[h]===undefined){return false}m=m[h]}else{if(m[h]!==undefined){delete m[h];return true}}}return false};e.regShort=function(h,i){if(e[h]!==undefined){throw"["+h+"] : short : has been register"}e[h]=i};e.shortRegister=function(m,h,l){if(!l||typeof l!="string"){l=b}var j=g[l];var o=m.split(".");if(!h){return false}if(j[h]){return false}var n=j;var i=null;while(i=o.shift()){if(o.length){if(n[i]===undefined){return false}n=n[i]}else{if(n[i]!==undefined){if(j[h]){return false}j[h]=n[i];return true}}}return false};e.getPKG=function(h){if(!h||typeof h!="string"){h=b}return g[h]};return e})()}a.register("core.dom.sizzle",function(l){var r=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,k=0,f=Object.prototype.toString,q=false,j=true;[0,0].sort(function(){j=false;return 0});var c=function(x,e,A,B){A=A||[];e=e||document;var D=e;if(e.nodeType!==1&&e.nodeType!==9){return[]}if(!x||typeof x!=="string"){return A}var y=[],u,F,I,t,w=true,v=c.isXML(e),C=x,E,H,G,z;do{r.exec("");u=r.exec(C);if(u){C=u[3];y.push(u[1]);if(u[2]){t=u[3];break}}}while(u);if(y.length>1&&m.exec(x)){if(y.length===2&&g.relative[y[0]]){F=i(y[0]+y[1],e)}else{F=g.relative[y[0]]?[e]:c(y.shift(),e);while(y.length){x=y.shift();if(g.relative[x]){x+=y.shift()}F=i(x,F)}}}else{if(!B&&y.length>1&&e.nodeType===9&&!v&&g.match.ID.test(y[0])&&!g.match.ID.test(y[y.length-1])){E=c.find(y.shift(),e,v);e=E.expr?c.filter(E.expr,E.set)[0]:E.set[0]}if(e){E=B?{expr:y.pop(),set:b(B)}:c.find(y.pop(),y.length===1&&(y[0]==="~"||y[0]==="+")&&e.parentNode?e.parentNode:e,v);F=E.expr?c.filter(E.expr,E.set):E.set;if(y.length>0){I=b(F)}else{w=false}while(y.length){H=y.pop();G=H;if(!g.relative[H]){H=""}else{G=y.pop()}if(G==null){G=e}g.relative[H](I,G,v)}}else{I=y=[]}}if(!I){I=F}if(!I){c.error(H||x)}if(f.call(I)==="[object Array]"){if(!w){A.push.apply(A,I)}else{if(e&&e.nodeType===1){for(z=0;I[z]!=null;z++){if(I[z]&&(I[z]===true||I[z].nodeType===1&&c.contains(e,I[z]))){A.push(F[z])}}}else{for(z=0;I[z]!=null;z++){if(I[z]&&I[z].nodeType===1){A.push(F[z])}}}}}else{b(I,A)}if(t){c(t,D,A,B);c.uniqueSort(A)}return A};c.uniqueSort=function(t){if(d){q=j;t.sort(d);if(q){for(var e=1;e<t.length;e++){if(t[e]===t[e-1]){t.splice(e--,1)}}}}return t};c.matches=function(e,t){return c(e,null,null,t)};c.find=function(z,e,A){var y;if(!z){return[]}for(var v=0,u=g.order.length;v<u;v++){var x=g.order[v],w;if((w=g.leftMatch[x].exec(z))){var t=w[1];w.splice(1,1);if(t.substr(t.length-1)!=="\\"){w[1]=(w[1]||"").replace(/\\/g,"");y=g.find[x](w,e,A);if(y!=null){z=z.replace(g.match[x],"");break}}}}if(!y){y=e.getElementsByTagName("*")}return{set:y,expr:z}};c.filter=function(D,C,G,w){var u=D,I=[],A=C,y,e,z=C&&C[0]&&c.isXML(C[0]);while(D&&C.length){for(var B in g.filter){if((y=g.leftMatch[B].exec(D))!=null&&y[2]){var t=g.filter[B],H,F,v=y[1];e=false;y.splice(1,1);if(v.substr(v.length-1)==="\\"){continue}if(A===I){I=[]}if(g.preFilter[B]){y=g.preFilter[B](y,A,G,I,w,z);if(!y){e=H=true}else{if(y===true){continue}}}if(y){for(var x=0;(F=A[x])!=null;x++){if(F){H=t(F,y,x,A);var E=w^!!H;if(G&&H!=null){if(E){e=true}else{A[x]=false}}else{if(E){I.push(F);e=true}}}}}if(H!==undefined){if(!G){A=I}D=D.replace(g.match[B],"");if(!e){return[]}break}}}if(D===u){if(e==null){c.error(D)}else{break}}u=D}return A};c.error=function(e){throw"Syntax error, unrecognized expression: "+e};var g={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")}},relative:{"+":function(y,t){var v=typeof t==="string",x=v&&!/\W/.test(t),z=v&&!x;if(x){t=t.toLowerCase()}for(var u=0,e=y.length,w;u<e;u++){if((w=y[u])){while((w=w.previousSibling)&&w.nodeType!==1){}y[u]=z||w&&w.nodeName.toLowerCase()===t?w||false:w===t}}if(z){c.filter(t,y,true)}},">":function(y,t){var w=typeof t==="string",x,u=0,e=y.length;if(w&&!/\W/.test(t)){t=t.toLowerCase();for(;u<e;u++){x=y[u];if(x){var v=x.parentNode;y[u]=v.nodeName.toLowerCase()===t?v:false}}}else{for(;u<e;u++){x=y[u];if(x){y[u]=w?x.parentNode:x.parentNode===t}}if(w){c.filter(t,y,true)}}},"":function(v,t,x){var u=k++,e=s,w;if(typeof t==="string"&&!/\W/.test(t)){t=t.toLowerCase();w=t;e=p}e("parentNode",t,u,v,w,x)},"~":function(v,t,x){var u=k++,e=s,w;if(typeof t==="string"&&!/\W/.test(t)){t=t.toLowerCase();w=t;e=p}e("previousSibling",t,u,v,w,x)}},find:{ID:function(t,u,v){if(typeof u.getElementById!=="undefined"&&!v){var e=u.getElementById(t[1]);return e?[e]:[]}},NAME:function(u,x){if(typeof x.getElementsByName!=="undefined"){var t=[],w=x.getElementsByName(u[1]);for(var v=0,e=w.length;v<e;v++){if(w[v].getAttribute("name")===u[1]){t.push(w[v])}}return t.length===0?null:t}},TAG:function(e,t){return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(v,t,u,e,y,z){v=" "+v[1].replace(/\\/g,"")+" ";if(z){return v}for(var w=0,x;(x=t[w])!=null;w++){if(x){if(y^(x.className&&(" "+x.className+" ").replace(/[\t\n]/g," ").indexOf(v)>=0)){if(!u){e.push(x)}}else{if(u){t[w]=false}}}}return false},ID:function(e){return e[1].replace(/\\/g,"")},TAG:function(t,e){return t[1].toLowerCase()},CHILD:function(e){if(e[1]==="nth"){var t=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(t[1]+(t[2]||1))-0;e[3]=t[3]-0}e[0]=k++;return e},ATTR:function(w,t,u,e,x,y){var v=w[1].replace(/\\/g,"");if(!y&&g.attrMap[v]){w[1]=g.attrMap[v]}if(w[2]==="~="){w[4]=" "+w[4]+" "}return w},PSEUDO:function(w,t,u,e,x){if(w[1]==="not"){if((r.exec(w[3])||"").length>1||/^\w/.test(w[3])){w[3]=c(w[3],null,null,t)}else{var v=c.filter(w[3],t,u,true^x);if(!u){e.push.apply(e,v)}return false}}else{if(g.match.POS.test(w[0])||g.match.CHILD.test(w[0])){return true}}return w},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){e.parentNode.selectedIndex;return e.selected===true},parent:function(e){return !!e.firstChild},empty:function(e){return !e.firstChild},has:function(u,t,e){return !!c(e[3],u).length},header:function(e){return(/h\d/i).test(e.nodeName)},text:function(e){return"text"===e.type},radio:function(e){return"radio"===e.type},checkbox:function(e){return"checkbox"===e.type},file:function(e){return"file"===e.type},password:function(e){return"password"===e.type},submit:function(e){return"submit"===e.type},image:function(e){return"image"===e.type},reset:function(e){return"reset"===e.type},button:function(e){return"button"===e.type||e.nodeName.toLowerCase()==="button"},input:function(e){return(/input|select|textarea|button/i).test(e.nodeName)}},setFilters:{first:function(t,e){return e===0},last:function(u,t,e,v){return t===v.length-1},even:function(t,e){return e%2===0},odd:function(t,e){return e%2===1},lt:function(u,t,e){return t<e[3]-0},gt:function(u,t,e){return t>e[3]-0},nth:function(u,t,e){return e[3]-0===t},eq:function(u,t,e){return e[3]-0===t}},filter:{PSEUDO:function(u,z,y,A){var e=z[1],t=g.filters[e];if(t){return t(u,y,z,A)}else{if(e==="contains"){return(u.textContent||u.innerText||c.getText([u])||"").indexOf(z[3])>=0}else{if(e==="not"){var v=z[3];for(var x=0,w=v.length;x<w;x++){if(v[x]===u){return false}}return true}else{c.error("Syntax error, unrecognized expression: "+e)}}}},CHILD:function(e,v){var y=v[1],t=e;switch(y){case"only":case"first":while((t=t.previousSibling)){if(t.nodeType===1){return false}}if(y==="first"){return true}t=e;case"last":while((t=t.nextSibling)){if(t.nodeType===1){return false}}return true;case"nth":var u=v[2],B=v[3];if(u===1&&B===0){return true}var x=v[0],A=e.parentNode;if(A&&(A.sizcache!==x||!e.nodeIndex)){var w=0;for(t=A.firstChild;t;t=t.nextSibling){if(t.nodeType===1){t.nodeIndex=++w}}A.sizcache=x}var z=e.nodeIndex-B;if(u===0){return z===0}else{return(z%u===0&&z/u>=0)}}},ID:function(t,e){return t.nodeType===1&&t.getAttribute("id")===e},TAG:function(t,e){return(e==="*"&&t.nodeType===1)||t.nodeName.toLowerCase()===e},CLASS:function(t,e){return(" "+(t.className||t.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(x,v){var u=v[1],e=g.attrHandle[u]?g.attrHandle[u](x):x[u]!=null?x[u]:x.getAttribute(u),y=e+"",w=v[2],t=v[4];return e==null?w==="!=":w==="="?y===t:w==="*="?y.indexOf(t)>=0:w==="~="?(" "+y+" ").indexOf(t)>=0:!t?y&&e!==false:w==="!="?y!==t:w==="^="?y.indexOf(t)===0:w==="$="?y.substr(y.length-t.length)===t:w==="|="?y===t||y.substr(0,t.length+1)===t+"-":false},POS:function(w,t,u,x){var e=t[2],v=g.setFilters[e];if(v){return v(w,u,t,x)}}}};c.selectors=g;var m=g.match.POS,h=function(t,e){return"\\"+(e-0+1)};for(var o in g.match){g.match[o]=new RegExp(g.match[o].source+(/(?![^\[]*\])(?![^\(]*\))/.source));g.leftMatch[o]=new RegExp(/(^(?:.|\r|\n)*?)/.source+g.match[o].source.replace(/\\(\d+)/g,h))}var b=function(t,e){t=Array.prototype.slice.call(t,0);if(e){e.push.apply(e,t);return e}return t};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(n){b=function(w,v){var t=v||[],u=0;if(f.call(w)==="[object Array]"){Array.prototype.push.apply(t,w)}else{if(typeof w.length==="number"){for(var e=w.length;u<e;u++){t.push(w[u])}}else{for(;w[u];u++){t.push(w[u])}}}return t}}var d;if(document.documentElement.compareDocumentPosition){d=function(t,e){if(!t.compareDocumentPosition||!e.compareDocumentPosition){if(t==e){q=true}return t.compareDocumentPosition?-1:1}var u=t.compareDocumentPosition(e)&4?-1:t===e?0:1;if(u===0){q=true}return u}}else{if("sourceIndex" in document.documentElement){d=function(t,e){if(!t.sourceIndex||!e.sourceIndex){if(t==e){q=true}return t.sourceIndex?-1:1}var u=t.sourceIndex-e.sourceIndex;if(u===0){q=true}return u}}else{if(document.createRange){d=function(v,t){if(!v.ownerDocument||!t.ownerDocument){if(v==t){q=true}return v.ownerDocument?-1:1}var u=v.ownerDocument.createRange(),e=t.ownerDocument.createRange();u.setStart(v,0);u.setEnd(v,0);e.setStart(t,0);e.setEnd(t,0);var w=u.compareBoundaryPoints(Range.START_TO_END,e);if(w===0){q=true}return w}}}}c.getText=function(e){var t="",v;for(var u=0;e[u];u++){v=e[u];if(v.nodeType===3||v.nodeType===4){t+=v.nodeValue}else{if(v.nodeType!==8){t+=c.getText(v.childNodes)}}}return t};(function(){var t=document.createElement("div"),u="script"+(new Date()).getTime();t.innerHTML="<a name='"+u+"'/>";var e=document.documentElement;e.insertBefore(t,e.firstChild);if(document.getElementById(u)){g.find.ID=function(w,x,y){if(typeof x.getElementById!=="undefined"&&!y){var v=x.getElementById(w[1]);return v?v.id===w[1]||typeof v.getAttributeNode!=="undefined"&&v.getAttributeNode("id").nodeValue===w[1]?[v]:undefined:[]}};g.filter.ID=function(x,v){var w=typeof x.getAttributeNode!=="undefined"&&x.getAttributeNode("id");return x.nodeType===1&&w&&w.nodeValue===v}}e.removeChild(t);e=t=null})();(function(){var e=document.createElement("div");e.appendChild(document.createComment(""));if(e.getElementsByTagName("*").length>0){g.find.TAG=function(t,x){var w=x.getElementsByTagName(t[1]);if(t[1]==="*"){var v=[];for(var u=0;w[u];u++){if(w[u].nodeType===1){v.push(w[u])}}w=v}return w}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){g.attrHandle.href=function(t){return t.getAttribute("href",2)}}e=null})();if(document.querySelectorAll){(function(){var e=c,u=document.createElement("div");u.innerHTML="<p class='TEST'></p>";if(u.querySelectorAll&&u.querySelectorAll(".TEST").length===0){return}c=function(y,x,v,w){x=x||document;if(!w&&x.nodeType===9&&!c.isXML(x)){try{return b(x.querySelectorAll(y),v)}catch(z){}}return e(y,x,v,w)};for(var t in e){c[t]=e[t]}u=null})()}(function(){var e=document.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}g.order.splice(1,0,"CLASS");g.find.CLASS=function(t,u,v){if(typeof u.getElementsByClassName!=="undefined"&&!v){return u.getElementsByClassName(t[1])}};e=null})();function p(t,y,x,B,z,A){for(var v=0,u=B.length;v<u;v++){var e=B[v];if(e){e=e[t];var w=false;while(e){if(e.sizcache===x){w=B[e.sizset];break}if(e.nodeType===1&&!A){e.sizcache=x;e.sizset=v}if(e.nodeName.toLowerCase()===y){w=e;break}e=e[t]}B[v]=w}}}function s(t,y,x,B,z,A){for(var v=0,u=B.length;v<u;v++){var e=B[v];if(e){e=e[t];var w=false;while(e){if(e.sizcache===x){w=B[e.sizset];break}if(e.nodeType===1){if(!A){e.sizcache=x;e.sizset=v}if(typeof y!=="string"){if(e===y){w=true;break}}else{if(c.filter(y,[e]).length>0){w=e;break}}}e=e[t]}B[v]=w}}}c.contains=document.compareDocumentPosition?function(t,e){return !!(t.compareDocumentPosition(e)&16)}:function(t,e){return t!==e&&(t.contains?t.contains(e):true)};c.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?t.nodeName!=="HTML":false};var i=function(e,z){var v=[],w="",x,u=z.nodeType?[z]:z;while((x=g.match.PSEUDO.exec(e))){w+=x[0];e=e.replace(g.match.PSEUDO,"")}e=g.relative[e]?e+"*":e;for(var y=0,t=u.length;y<t;y++){c(e,u[y],v)}return c.filter(w,v)};return c});a.register("core.dom.builder",function(b){return function(f,e){var k=((typeof f)==="string");var c=f;if(k){c=b.C("div");c.innerHTML=f}var l,g;l={};if(e){for(m in selectorList){l[m]=b.core.dom.sizzle(e[m].toString(),c)}}else{g=b.core.dom.sizzle("[node-type]",c);for(var h=0,j=g.length;h<j;h+=1){var m=g[h].getAttribute("node-type");if(!l[m]){l[m]=[]}l[m].push(g[h])}}var d=f;if(k){d=b.C("buffer");while(c.childNodes[0]){d.appendChild(c.childNodes[0])}}return{box:d,list:l}}});a.register("core.dom.isNode",function(b){return function(c){return(c!=undefined)&&Boolean(c.nodeName)&&Boolean(c.nodeType)}});a.register("core.evt.addEvent",function(b){return function(e,d,c){e=b.E(e);if(e==null){return false}if(typeof c!=="function"){return false}if(e.addEventListener){e.addEventListener(d,c,false)}else{if(e.attachEvent){e.attachEvent("on"+d,c)}else{e["on"+d]=c}}return true}});a.register("core.util.browser",function(i){var b=navigator.userAgent.toLowerCase();var l=window.external||"";var d,f,g,n,h;var c=function(e){var m=0;return parseFloat(e.replace(/\./g,function(){return(m++==1)?"":"."}))};try{if((/windows|win32/i).test(b)){h="windows"}else{if((/macintosh/i).test(b)){h="macintosh"}else{if((/rhino/i).test(b)){h="rhino"}}}if((f=b.match(/applewebkit\/([^\s]*)/))&&f[1]){d="webkit";n=c(f[1])}else{if((f=b.match(/presto\/([\d.]*)/))&&f[1]){d="presto";n=c(f[1])}else{if(f=b.match(/msie\s([^;]*)/)){d="trident";n=1;if((f=b.match(/trident\/([\d.]*)/))&&f[1]){n=c(f[1])}}else{if(/gecko/.test(b)){d="gecko";n=1;if((f=b.match(/rv:([\d.]*)/))&&f[1]){n=c(f[1])}}}}}if(/world/.test(b)){g="world"}else{if(/360se/.test(b)){g="360"}else{if((/maxthon/.test(b))||typeof l.max_version=="number"){g="maxthon"}else{if(/tencenttraveler\s([\d.]*)/.test(b)){g="tt"}else{if(/se\s([\d.]*)/.test(b)){g="sogou"}}}}}}catch(k){}var j={OS:h,CORE:d,Version:n,EXTRA:(g?g:false),IE:/msie/.test(b),OPERA:/opera/.test(b),MOZ:/gecko/.test(b)&&!/(compatible|webkit)/.test(b),IE5:/msie 5 /.test(b),IE55:/msie 5.5/.test(b),IE6:/msie 6/.test(b),IE7:/msie 7/.test(b),IE8:/msie 8/.test(b),IE9:/msie 9/.test(b),IE10:/msie 10/.test(b),SAFARI:!/chrome\/([\d.]*)/.test(b)&&/\/([\da-f.]*) safari/.test(b),CHROME:/chrome\/([\d.]*)/.test(b),IPAD:/\(ipad/i.test(b),IPHONE:/\(iphone/i.test(b),ITOUCH:/\(itouch/i.test(b),MOBILE:/mobile/i.test(b)};return j});a.register("core.func.getType",function(b){return function(c){var d;return((d=typeof(c))=="object"?c==null&&"null"||Object.prototype.toString.call(c).slice(8,-1):d).toLowerCase()}});a.register("core.dom.ready",function(h){var d=[];var m=false;var l=h.core.func.getType;var i=h.core.util.browser;var g=h.core.evt.addEvent;var j=function(){if(!m){if(document.readyState==="complete"){return true}}return m};var e=function(){if(m==true){return}m=true;for(var o=0,n=d.length;o<n;o++){if(l(d[o])==="function"){try{d[o].call()}catch(p){}}}d=[]};var b=function(){if(j()){e();return}try{document.documentElement.doScroll("left")}catch(n){setTimeout(arguments.callee,25);return}e()};var c=function(){if(j()){e();return}setTimeout(arguments.callee,25)};var f=function(){g(document,"DOMContentLoaded",e)};var k=function(){g(window,"load",e)};if(!j()){if(h.IE&&window===window.top){b()}f();c();k()}return function(n){if(j()){if(l(n)==="function"){n.call()}}else{d.push(n)}}});a.register("core.dom.setStyle",function(c){function b(){if("y" in b){return b.y}return b.y=("filters" in c.C("div"))}return function(d,e,f){if(b()){switch(e){case"opacity":d.style.filter="alpha(opacity="+(f*100)+")";if(!d.currentStyle||!d.currentStyle.hasLayout){d.style.zoom=1}break;case"float":e="styleFloat";default:d.style[e]=f}}else{if(e=="float"){e="cssFloat"}d.style[e]=f}}});a.register("core.dom.getStyle",function(c){function b(){if("y" in b){return b.y}return b.y=("filters" in c.C("div"))}return function(f,h){if(b()){switch(h){case"opacity":var j=100;try{j=f.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(i){try{j=f.filters("alpha").opacity}catch(i){}}return j/100;case"float":h="styleFloat";default:var g=f.currentStyle?f.currentStyle[h]:null;return(f.style[h]||g)}}else{if(h=="float"){h="cssFloat"}try{var d=document.defaultView.getComputedStyle(f,"")}catch(i){}return f.style[h]||d?d[h]:null}}});a.register("core.dom.hasClassName",function(b){return function(d,c){return(new RegExp("(^|\\s)"+c+"($|\\s)").test(d.className))}});a.register("core.str.trim",function(b){return function(f){if(typeof f!=="string"){throw"trim need a string as parameter"}var c=f.length;var e=0;var d=/(\u3000|\s|\t|\u00A0)/;while(e<c){if(!d.test(f.charAt(e))){break}e+=1}while(c>e){if(!d.test(f.charAt(c-1))){break}c-=1}return f.slice(e,c)}});a.register("core.dom.addClassName",function(b){return function(d,c){if(d.nodeType===1){if(!b.core.dom.hasClassName(d,c)){d.className=b.core.str.trim(d.className)+" "+c}}}});a.register("core.dom.removeClassName",function(b){return function(d,c){if(d.nodeType===1){if(b.core.dom.hasClassName(d,c)){d.className=d.className.replace(new RegExp("(^|\\s)"+c+"($|\\s)")," ")}}}});a.register("core.dom.contains",function(b){return function(c,d){if(!c||!d){return false}if(c===d){return false}else{if(c.compareDocumentPosition){return((c.compareDocumentPosition(d)&16)===16)}else{if(c.contains&&d.nodeType===1){return c.contains(d)}else{while(d=d.parentNode){if(c===d){return true}}}}}return false}});a.register("core.util.scrollPos",function(b){return function(e){e=e||document;var c=e.documentElement;var d=e.body;return{top:Math.max(window.pageYOffset||0,c.scrollTop,d.scrollTop),left:Math.max(window.pageXOffset||0,c.scrollLeft,d.scrollLeft)}}});a.register("core.obj.parseParam",function(b){return function(e,d,c){var f,g={};d=d||{};for(f in e){g[f]=e[f];if(d[f]!=null){if(c){if(e.hasOwnProperty(f)){g[f]=d[f]}}else{g[f]=d[f]}}}return g}});a.register("core.dom.position",function(d){var b=function(h){var i,g,f,e,k,j;i=h.getBoundingClientRect();g=d.core.util.scrollPos();f=h.ownerDocument.body;e=h.ownerDocument.documentElement;k=e.clientTop||f.clientTop||0;j=e.clientLeft||f.clientLeft||0;return{l:parseInt(i.left+g.left-j,10)||0,t:parseInt(i.top+g.top-k,10)||0}};var c=function(g,e){var h,f;h=[g.offsetLeft,g.offsetTop];f=g.offsetParent;if(f!==g&&f!==e){while(f){h[0]+=f.offsetLeft;h[1]+=f.offsetTop;f=f.offsetParent}}if(d.core.util.browser.OPERA!=-1||(d.core.util.browser.SAFARI!=-1&&g.style.position=="absolute")){h[0]-=document.body.offsetLeft;h[1]-=document.body.offsetTop}if(g.parentNode){f=g.parentNode}else{f=null}while(f&&!/^body|html$/i.test(f.tagName)&&f!==e){if(f.style.display.search(/^inline|table-row.*$/i)){h[0]-=f.scrollLeft;h[1]-=f.scrollTop}f=f.parentNode}return{l:parseInt(h[0],10),t:parseInt(h[1],10)}};return function(g,e){if(g==document.body){return false}if(g.parentNode==null){return false}if(g.style.display=="none"){return false}var f=d.core.obj.parseParam({parent:null},e);if(g.getBoundingClientRect){if(f.parent){var i=b(g);var h=b(f.parent);return{l:i.l-h.l,t:i.t-h.t}}else{return b(g)}}else{return c(g,f.parent||document.body)}}});a.register("core.util.hideContainer",function(d){var e;var b=function(){if(e){return}e=d.C("div");e.style.cssText="position:absolute;top:-9999px;left:-9999px;";document.getElementsByTagName("head")[0].appendChild(e)};var c={appendChild:function(f){if(d.core.dom.isNode(f)){b();e.appendChild(f)}},removeChild:function(f){if(d.core.dom.isNode(f)){e&&e.removeChild(f)}}};return c});a.register("core.dom.getSize",function(c){var b=function(e){if(!c.core.dom.isNode(e)){throw"core.dom.getSize need Element as first parameter"}return{width:e.offsetWidth,height:e.offsetHeight}};var d=function(f){var e=null;if(f.style.display==="none"){f.style.visibility="hidden";f.style.display="";e=b(f);f.style.display="none";f.style.visibility="visible"}else{e=b(f)}return e};return function(f){var e={};if(!f.parentNode){c.core.util.hideContainer.appendChild(f);e=d(f);c.core.util.hideContainer.removeChild(f)}else{e=d(f)}return e}});a.register("core.dom.cssText",function(d){var g=function(n){var m=0;var l=[];var p="close";var j=false;var h=null;var k=function(i){l.push({type:"info",content:n.slice(0,m)});l.push({type:"sign",content:n.slice(m,m+1)});n=n.slice(m+1);m=0};while(n){var o=n.charAt(m);switch(o){case":":if(!j){if(p==="close"){l.push({type:"attr",content:n.slice(0,m)});l.push({type:"sign",content:n.slice(m,m+1)});n=n.slice(m+1);m=0;p="open";break}}m+=1;break;case";":if(!j){if(p==="open"){l.push({type:"info",content:n.slice(0,m)});l.push({type:"sign",content:n.slice(m,m+1)})}n=n.slice(m+1);m=0;p="close";break}m+=1;break;case'"':case"'":if(j){if(o===h){j=!j;h=null}}else{j=!j;h=o}m+=1;break;case" ":case"!":case",":case"(":case")":k(o);break;case"":l.push({type:"info",content:n.slice(0,m)});n="";m=0;break;default:m+=1}}return l};var f=function(l){var j={};var m;for(var k=0,h=l.length;k<h;k+=1){if(l[k].type==="attr"){m=l[k]["content"];j[m]=""}else{if(l[k].type==="sign"&&l[k]["content"]===";"){m=null;continue}else{if(l[k].type==="sign"&&l[k]["content"]===":"){continue}else{if(m!==null){j[m]+=l[k]["content"]}}}}}return j};var b=({webkit:"-webkit-",presto:"-o-",trident:"-ms-",gecko:"-moz-"})[d.core.util.browser.CORE];var e=["transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","animation","animation-delay","animation-direction","animation-duration","animation-iteration-count","animation-name","animation-play-state","animation-timing-function"];var c=function(k){for(var j=0,h=e.length;j<h;j+=1){if(k===e[j]){return true}}return false};return function(j){var k=f(g(j||""));var h=function(m,l){m=m.toLowerCase();k[m]=l;if(c(m)){k[b+m]=l}return i};var i={push:h,remove:function(l){l=l.toLowerCase();k[l]&&delete k[l];if(c(l)){if(k[b+l]){delete k[b+l]}}return i},merge:function(n){var m=f(g(n||""));for(var l in m){h(l,m[l])}},getCss:function(){var m=[];for(var l in k){m.push(l+":"+k[l])}return m.join(";")}};return i}});a.register("core.arr.isArray",function(b){return function(c){return Object.prototype.toString.call(c)==="[object Array]"}});a.register("core.arr.foreach",function(d){var b=function(k,g){var j=[];for(var h=0,f=k.length;h<f;h+=1){var e=g(k[h],h);if(e===false){break}else{if(e!==null){j[h]=e}}}return j};var c=function(i,f){var h={};for(var g in i){var e=f(i[g],g);if(e===false){break}else{if(e!==null){h[g]=e}}}return h};return function(f,e){if(d.core.arr.isArray(f)||(f.length&&f[0]!==undefined)){return b(f,e)}else{if(typeof f==="object"){return c(f,e)}}return null}});a.register("core.evt.removeEvent",function(b){return function(e,d,c){e=b.E(e);if(e==null){return false}if(typeof c!=="function"){return false}if(e.removeEventListener){e.removeEventListener(d,c,false)}else{if(e.detachEvent){e.detachEvent("on"+d,c)}}e["on"+d]=null;return true}});a.register("core.evt.getEvent",function(b){return(function(){if(document.addEventListener){return function(){var d=arguments.callee;var c;do{c=d.arguments[0];if(c&&(c.constructor==Event||c.constructor==MouseEvent||c.constructor==KeyboardEvent)){return c}}while(d=d.caller);return c}}else{return function(e,d,c){return window.event}}}())});a.register("core.evt.stopEvent",function(b){return function(c){c=c||b.core.evt.getEvent();if(c.preventDefault){c.preventDefault();c.stopPropagation()}else{c.cancelBubble=true;c.returnValue=false}return false}});a.register("core.evt.preventDefault",function(b){return function(c){c=c||b.core.evt.getEvent();if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}}});a.register("core.json.queryToJson",function(b){return function(e,j){var l=b.core.str.trim(e).split("&");var k={};var d=function(i){if(j){return decodeURIComponent(i)}else{return i}};for(var g=0,h=l.length;g<h;g++){if(l[g]){var f=l[g].split("=");var c=f[0];var m=f[1];if(f.length<2){m=c;c="$nullName"}if(!k[c]){k[c]=d(m)}else{if(b.core.arr.isArray(k[c])!=true){k[c]=[k[c]]}k[c].push(d(m))}}}return k}});a.register("core.evt.fixEvent",function(c){var b="clientX clientY pageX pageY screenX screenY".split(" ");return function(g){g=g||c.core.evt.getEvent();if(!g.target){g.target=g.srcElement||document}if(g.pageX==null&&g.clientX!=null){var f=document.documentElement;var d=document.body;g.pageX=g.clientX+(f.scrollLeft||d&&d.scrollLeft||0)-(f.clientLeft||d&&d.clientLeft||0);g.pageY=g.clientY+(f.scrollTop||d&&d.scrollTop||0)-(f.clientTop||d&&d.clientTop||0)}if(!g.which&&g.button){if(g.button&1){g.which=1}else{if(g.button&4){g.which=2}else{if(g.button&2){g.which=3}}}}if(g.relatedTarget===undefined){g.relatedTarget=g.fromElement||g.toElement}if(g.layerX==null&&g.offsetX!=null){g.layerX=g.offsetX;g.layerY=g.offsetY}return g}});a.register("core.obj.isEmpty",function(b){return function(e,d){for(var c in e){if(d||e.hasOwnProperty(c)){return false}}return true}});a.register("core.func.empty",function(){return function(){}});a.register("core.evt.delegatedEvent",function(c){var b=function(g,f){for(var e=0,d=g.length;e<d;e+=1){if(c.core.dom.contains(g[e],f)){return true}}return false};return function(f,i){if(!c.core.dom.isNode(f)){throw"core.evt.delegatedEvent need an Element as first Parameter"}if(!i){i=[]}if(c.core.arr.isArray(i)){i=[i]}var d={};var h=function(m){var j=c.core.evt.fixEvent(m);var l=j.target;var k=m.type;e(l,k,j)};var e=function(n,m,k){var l=null;var o=function(){var r,p,q;r=n.getAttribute("action-target");if(r){p=c.core.dom.sizzle(r,f);if(p.length){q=k.target=p[0]}}o=c.core.func.empty;return q};var j=function(){var p=o()||n;if(d[m]&&d[m][l]){return d[m][l]({evt:k,el:p,box:f,data:c.core.json.queryToJson(p.getAttribute("action-data")||"")})}else{return true}};if(b(i,n)){return false}else{if(!c.core.dom.contains(f,n)){return false}else{while(n&&n!==f){if(n.nodeType===1){l=n.getAttribute("action-type");if(l&&j()===false){break}}n=n.parentNode}}}};var g={};g.add=function(l,m,k){if(!d[m]){d[m]={};c.core.evt.addEvent(f,m,h)}var j=d[m];j[l]=k};g.remove=function(j,k){if(d[k]){delete d[k][j];if(c.core.obj.isEmpty(d[k])){delete d[k];c.core.evt.removeEvent(f,k,h)}}};g.pushExcept=function(j){i.push(j)};g.removeExcept=function(l){if(!l){i=[]}else{for(var k=0,j=i.length;k<j;k+=1){if(i[k]===l){i.splice(k,1)}}}};g.clearExcept=function(j){i=[]};g.fireAction=function(k,n,j,m){var l="";if(m&&m.actionData){l=m.actionData}if(d[n]&&d[n][k]){d[n][k]({evt:j,el:null,box:f,data:c.core.json.queryToJson(l),fireFrom:"fireAction"})}};g.fireInject=function(m,n,j){var k=m.getAttribute("action-type");var l=m.getAttribute("action-data");if(k&&d[n]&&d[n][k]){d[n][k]({evt:j,el:m,box:f,data:c.core.json.queryToJson(l||""),fireFrom:"fireInject"})}};g.fireDom=function(k,l,j){e(k,l,j||{})};g.destroy=function(){for(var m in d){for(var j in d[m]){delete d[m][j]}delete d[m];c.core.evt.removeEvent(f,m,h)}};return g}});a.register("core.dom.removeNode",function(b){return function(c){c=b.E(c)||c;try{c.parentNode.removeChild(c)}catch(d){}}});a.register("core.util.getUniqueKey",function(d){var b=(new Date()).getTime().toString(),c=1;return function(){return b+(c++)}});a.register("core.str.parseURL",function(b){return function(e){var d=/^(?:([A-Za-z]+):(\/{0,3}))?([0-9.\-A-Za-z]+\.[0-9A-Za-z]+)?(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/;var j=["url","scheme","slash","host","port","path","query","hash"];var g=d.exec(e);var h={};for(var f=0,c=j.length;f<c;f+=1){h[j[f]]=g[f]||""}return h}});a.register("core.json.jsonToQuery",function(b){var c=function(e,d){e=e==null?"":e;e=b.core.str.trim(e.toString());if(d){return encodeURIComponent(e)}return e};return function(h,f){var j=[];if(typeof h=="object"){for(var e in h){if(e==="$nullName"){j=j.concat(h[e]);continue}if(h[e] instanceof Array){for(var g=0,d=h[e].length;g<d;g++){j.push(e+"="+c(h[e][g],f))}}else{if(typeof h[e]!="function"){j.push(e+"="+c(h[e],f))}}}}if(j.length){return j.join("&")}return""}});a.register("core.util.URL",function(b){return function(g,d){var f=b.core.obj.parseParam({isEncodeQuery:false,isEncodeHash:false},d||{});var e={};var i=b.core.str.parseURL(g);var c=b.core.json.queryToJson(i.query);var h=b.core.json.queryToJson(i.hash);e.setParam=function(j,k){c[j]=k;return this};e.getParam=function(j){return c[j]};e.setParams=function(k){for(var j in k){e.setParam(j,k[j])}return this};e.setHash=function(j,k){h[j]=k;return this};e.getHash=function(j){return h[j]};e.valueOf=e.toString=function(){var j=[];var k=b.core.json.jsonToQuery(c,f.isEncodeQuery);var l=b.core.json.jsonToQuery(h,f.isEncodeQuery);if(i.scheme!=""){j.push(i.scheme+":");j.push(i.slash)}if(i.host!=""){j.push(i.host);if(i.port!=""){j.push(":");j.push(i.port)}}j.push("/");j.push(i.path);if(k!=""){j.push("?"+k)}if(l!=""){j.push("#"+l)}return j.join("")};return e}});a.register("core.io.scriptLoader",function(c){var d={};var b={url:"",charset:"UTF-8",timeout:30*1000,args:{},onComplete:c.core.func.empty,onTimeout:c.core.func.empty,isEncode:false,uniqueID:null};return function(i){var g,e;var f=c.core.obj.parseParam(b,i);if(f.url==""){throw"scriptLoader: url is null"}var h=f.uniqueID||c.core.util.getUniqueKey();g=d[h];if(g!=null&&c.IE!=true){c.core.dom.removeNode(g);g=null}if(g==null){g=d[h]=c.C("script")}g.charset=f.charset;g.id="scriptRequest_script_"+h;g.type="text/javascript";if(f.onComplete!=null){if(c.IE){g.onreadystatechange=function(){if(g.readyState.toLowerCase()=="loaded"||g.readyState.toLowerCase()=="complete"){try{clearTimeout(e);document.getElementsByTagName("head")[0].removeChild(g);g.onreadystatechange=null}catch(j){}f.onComplete()}}}else{g.onload=function(){try{clearTimeout(e);c.core.dom.removeNode(g)}catch(j){}f.onComplete()}}}g.src=c.core.util.URL(f.url,{isEncodeQuery:f.isEncode}).setParams(f.args).toString();document.getElementsByTagName("head")[0].appendChild(g);if(f.timeout>0){e=setTimeout(function(){try{document.getElementsByTagName("head")[0].removeChild(g)}catch(j){}f.onTimeout()},f.timeout)}return g}});a.register("core.io.jsonp",function(b){return function(g){var e=b.core.obj.parseParam({url:"",charset:"UTF-8",timeout:30*1000,args:{},onComplete:null,onTimeout:null,responseName:null,isEncode:false,varkey:"callback"},g);var h=-1;var f=e.responseName||("STK_"+b.core.util.getUniqueKey());e.args[e.varkey]=f;var c=e.onComplete;var d=e.onTimeout;window[f]=function(i){if(h!=2&&c!=null){h=1;c(i)}};e.onComplete=null;e.onTimeout=function(){if(h!=1&&d!=null){h=2;d()}};return b.core.io.scriptLoader(e)}});a.register("core.arr.indexOf",function(b){return function(e,f){if(f.indexOf){return f.indexOf(e)}for(var d=0,c=f.length;d<c;d++){if(f[d]===e){return d}}return -1}});a.register("core.arr.inArray",function(b){return function(c,d){return b.core.arr.indexOf(c,d)>-1}});a.register("core.json.merge",function(d){var c=function(f){if(f===undefined){return true}if(f===null){return true}if(d.core.arr.inArray((typeof f),["number","string","function","boolean"])){return true}if(d.core.dom.isNode(f)){return true}return false};var b=function(h,l,m){if(c(m)){h[l]=m;return}if(d.core.arr.isArray(m)){if(!d.core.arr.isArray(h[l])){h[l]=[]}for(var j=0,f=m.length;j<f;j+=1){b(h[l],j,m[j])}return}if(typeof m==="object"){if(c(h[l])||d.core.arr.isArray(h[l])){h[l]={}}for(var g in m){b(h[l],g,m[g])}return}};var e=function(h,j,g){var i={};if(g){for(var f in h){b(i,f,h[f])}for(var f in j){b(i,f,j[f])}}else{for(var f in h){i[f]=h[f]}for(var f in j){i[f]=j[f]}}return i};return function(f,i,h){var g=d.core.obj.parseParam({isDeep:false},h);return e(f,i,g.isDeep)}});a.register("core.obj.beget",function(c){var b=function(){};return function(d){b.prototype=d;return new b()}});a.register("core.str.encodeHTML",function(b){return function(c){if(typeof c!=="string"){throw"encodeHTML need a string as parameter"}return c.replace(/\&/g,"&amp;").replace(/"/g,"&quot;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\'/g,"&#39;").replace(/\u00A0/g,"&nbsp;").replace(/(\u0020|\u000B|\u2028|\u2029|\f)/g,"&#32;")}});a.register("core.str.bLength",function(b){return function(d){if(!d){return 0}var c=d.match(/[^\x00-\xff]/g);return(d.length+(!c?0:c.length))}});a.register("core.str.leftB",function(b){return function(e,c){var d=e.replace(/\*/g," ").replace(/[^\x00-\xff]/g,"**");e=e.slice(0,d.slice(0,c).replace(/\*\*/g," ").replace(/\*/g,"").length);if(b.core.str.bLength(e)>c&&c>0){e=e.slice(0,e.length-1)}return e}});a.register("core.util.easyTemplate",function(c){var b=function(f,h){if(!f){return""}if(f!==b.template){b.template=f;b.aStatement=b.parsing(b.separate(f))}var e=b.aStatement;var g=function(d){if(d){h=d}return arguments.callee};g.toString=function(){return(new Function(e[0],e[1]))(h)};return g};b.separate=function(d){var f=/\\'/g;var e=d.replace(/(<(\/?)#(.*?(?:\(.*?\))*)>)|(')|([\r\n\t])|(\$\{([^\}]*?)\})/g,function(j,i,p,o,n,m,l,k){if(i){return"{|}"+(p?"-":"+")+o+"{|}"}if(n){return"\\'"}if(m){return""}if(l){return"'+("+k.replace(f,"'")+")+'"}});return e};b.parsing=function(m){var l,f,i,e,h,g,j,k=["var aRet = [];"];j=m.split(/\{\|\}/);var d=/\s/;while(j.length){i=j.shift();if(!i){continue}h=i.charAt(0);if(h!=="+"&&h!=="-"){i="'"+i+"'";k.push("aRet.push("+i+");");continue}e=i.split(d);switch(e[0]){case"+et":l=e[1];f=e[2];k.push('aRet.push("<!--'+l+' start-->");');break;case"-et":k.push('aRet.push("<!--'+l+' end-->");');break;case"+if":e.splice(0,1);k.push("if"+e.join(" ")+"{");break;case"+elseif":e.splice(0,1);k.push("}else if"+e.join(" ")+"{");break;case"-if":k.push("}");break;case"+else":k.push("}else{");break;case"+list":k.push("if("+e[1]+".constructor === Array){with({i:0,l:"+e[1]+".length,"+e[3]+"_index:0,"+e[3]+":null}){for(i=l;i--;){"+e[3]+"_index=(l-i-1);"+e[3]+"="+e[1]+"["+e[3]+"_index];");break;case"-list":k.push("}}}");break;default:break}}k.push('return aRet.join("");');return[f,k.join("")]};return b});a.register("core.evt.custEvent",function(d){var i="__custEventKey__",c=1,h={},e=function(m,l){var k=(typeof m=="number")?m:m[i];return(k&&h[k])&&{obj:(typeof l=="string"?h[k][l]:h[k]),key:k}};var g={};var j=function(p,m,l,n,k){if(p&&typeof m=="string"&&l){var o=e(p,m);if(!o||!o.obj){throw"custEvent ("+m+") is undefined !"}o.obj.push({fn:l,data:n,once:k});return o.key}};var b=function(m,t,r,n){var v=true;var p=function(){v=false};if(m&&typeof t=="string"){var k=e(m,t),q;if(k&&(q=k.obj)){r=typeof r!="undefined"&&[].concat(r)||[];for(var l=q.length-1;l>-1&&q[l];l--){var u=q[l].fn;var s=q[l].once;if(u&&u.apply){try{u.apply(m,[{obj:m,type:t,data:q[l].data,preventDefault:p}].concat(r));if(s){q.splice(l,1)}}catch(o){d.log("[error][custEvent]"+o.message,o,o.stack)}}}if(v&&d.core.func.getType(n)==="function"){n()}return k.key}}};var f={define:function(o,m){if(o&&m){var l=(typeof o=="number")?o:o[i]||(o[i]=c++),n=h[l]||(h[l]={});m=[].concat(m);for(var k=0;k<m.length;k++){n[m[k]]||(n[m[k]]=[])}return l}},undefine:function(n,m){if(n){var l=(typeof n=="number")?n:n[i];if(l&&h[l]){if(m){m=[].concat(m);for(var k=0;k<m.length;k++){if(m[k] in h[l]){delete h[l][m[k]]}}}else{delete h[l]}}}},add:function(n,l,k,m){return j(n,l,k,m,false)},once:function(n,l,k,m){return j(n,l,k,m,true)},remove:function(p,n,m){if(p){var o=e(p,n),q,k;if(o&&(q=o.obj)){if(d.core.arr.isArray(q)){if(m){var l=0;while(q[l]){if(q[l].fn===m){break}l++}q.splice(l,1)}else{q.splice(0,q.length)}}else{for(var l in q){q[l]=[]}}return o.key}}},fire:function(n,m,k,l){return b(n,m,k,l)},hook:function(t,v,n){if(!t||!v||!n){return}var q=[],o=t[i],r=o&&h[o],l,u=v[i]||(v[i]=c++),k;if(r){k=g[o+"_"+u]||(g[o+"_"+u]={});var s=function(x){var w=true;b(v,k[x.type].type,Array.prototype.slice.apply(arguments,[1,arguments.length]),function(){w=false});w&&x.preventDefault()};for(var p in n){var m=n[p];if(!k[p]){if(l=r[p]){l.push({fn:s,data:undefined});k[p]={fn:s,type:m};q.push(m)}}}f.define(v,q)}},unhook:function(r,l,q){if(!r||!l||!q){return}var n=r[i],p=l[i],k=g[n+"_"+p];if(k){for(var m in q){var o=q[m];if(k[m]){f.remove(r,m,k[m].fn)}}}},destroy:function(){h={};c=1;g={}}};return f});a.register("core.util.drag",function(d){var b=function(f){f.cancelBubble=true;return false};var c=function(f,e){f.clientX=e.clientX;f.clientY=e.clientY;f.pageX=e.clientX+d.core.util.scrollPos()["left"];f.pageY=e.clientY+d.core.util.scrollPos()["top"];return f};return function(f,n){if(!d.core.dom.isNode(f)){throw"core.util.drag need Element as first parameter"}var m=d.core.obj.parseParam({actRect:[],actObj:{}},n);var j={};var k=d.core.evt.custEvent.define(m.actObj,"dragStart");var g=d.core.evt.custEvent.define(m.actObj,"dragEnd");var h=d.core.evt.custEvent.define(m.actObj,"draging");var l=function(p){var o=c({},p);document.body.onselectstart=function(){return false};d.core.evt.addEvent(document,"mousemove",i);d.core.evt.addEvent(document,"mouseup",e);d.core.evt.addEvent(document,"click",b,true);if(p.preventDefault){p.preventDefault();p.stopPropagation()}d.core.evt.custEvent.fire(k,"dragStart",o);return false};var i=function(p){var o=c({},p);p.cancelBubble=true;d.core.evt.custEvent.fire(k,"draging",o)};var e=function(p){var o=c({},p);document.body.onselectstart=function(){return true};d.core.evt.removeEvent(document,"mousemove",i);d.core.evt.removeEvent(document,"mouseup",e);d.core.evt.removeEvent(document,"click",b,true);d.core.evt.custEvent.fire(k,"dragEnd",o)};d.core.evt.addEvent(f,"mousedown",l);j.destroy=function(){d.core.evt.removeEvent(f,"mousedown",l);m=null};j.getActObj=function(){return m.actObj};return j}});a.register("core.util.storage",function(f){var b=window.localStorage;if(b){return{get:function(e){return unescape(b.getItem(e))},set:function(e,h,i){b.setItem(e,escape(h))},del:function(e){b.removeItem(e)},clear:function(){b.clear()},getAll:function(){var e=b.length,j=null,k=[];for(var h=0;h<e;h++){j=b.key(h);k.push(j+"="+b.getItem(j))}return k.join("; ")}}}else{if(window.ActiveXObject){var c=document.documentElement;var d="localstorage";try{c.addBehavior("#default#userdata");c.save("localstorage")}catch(g){}return{set:function(e,h){c.setAttribute(e,h);c.save(d)},get:function(e){c.load(d);return c.getAttribute(e)},del:function(e){c.removeAttribute(e);c.save(d)}}}else{return{get:function(m){var j=document.cookie.split("; "),h=j.length,e=[];for(var k=0;k<h;k++){e=j[k].split("=");if(m===e[0]){return unescape(e[1])}}return null},set:function(e,h,i){if(!(i&&(i instanceof Date))){i=new Date();i.setDate(i.getDate()+1)}document.cookie=e+"="+escape(h)+"; expires="+i.toGMTString()},del:function(e){document.cookie=e+"=''; expires=Fri, 31 Dec 1999 23:59:59 GMT;"},clear:function(){var j=document.cookie.split("; "),h=j.length,e=[];for(var k=0;k<h;k++){e=j[k].split("=");this.deleteKey(e[0])}},getAll:function(){return unescape(document.cookie.toString())}}}}});a.register("core.util.cookie",function(c){var b={set:function(h,k,j){var e=[];var i,g;var f=c.core.obj.parseParam({expire:null,path:"/",domain:null,secure:null,encode:true},j);if(f.encode==true){k=escape(k)}e.push(h+"="+k);if(f.path!=null){e.push("path="+f.path)}if(f.domain!=null){e.push("domain="+f.domain)}if(f.secure!=null){e.push(f.secure)}if(f.expire!=null){i=new Date();g=i.getTime()+f.expire*3600000;i.setTime(g);e.push("expires="+i.toGMTString())}document.cookie=e.join(";")},get:function(f){f=f.replace(/([\.\[\]\$])/g,"\\$1");var e=new RegExp(f+"=([^;]*)?;","i");var g=document.cookie+";";var d=g.match(e);if(d){return d[1]||""}else{return""}},remove:function(d,e){e=e||{};e.expire=-10;b.set(d,"",e)}};return b});a.register("core.util.language",function(b){return function(e,g){var f=[];for(var d=2,c=arguments.length;d<c;d+=1){f.push(arguments[d])}return e.replace(/#L\{((.*?)(?:[^\\]))\}/ig,function(){var i=arguments[1];var h;if(g&&g[i]!==undefined){h=g[i]}else{h=i}if(f.length){h=h.replace(/(\%s)/ig,function(){var j=f.shift();if(j!==undefined){return j}else{return arguments[0]}})}return h})}});a.register("core.util.listener",function(b){return(function(){var d={};var e=[];var c;var f=function(){if(e.length==0){return}clearTimeout(c);var g=e.splice(0,1)[0];try{g.func.apply(g.func,[].concat(g.data))}catch(h){}c=setTimeout(f,25)};return{register:function(g,i,h){d[g]=d[g]||{};d[g][i]=d[g][i]||[];d[g][i].push(h)},fire:function(j,l,m){var k;var h,g;if(d[j]&&d[j][l]&&d[j][l].length>0){k=d[j][l];k.data_cache=m;for(h=0,g=k.length;h<g;h++){e.push({channel:j,evt:l,func:k[h],data:m})}f()}},remove:function(j,l,k){if(d[j]){if(d[j][l]){for(var h=0,g=d[j][l].length;h<g;h++){if(d[j][l][h]===k){d[j][l].splice(h,1);break}}}}},list:function(){return d},cache:function(g,h){if(d[g]&&d[g][h]){return d[g][h].data_cache}}}})()});(function(){var c=a.core;var d={isNode:c.dom.isNode,Ready:c.dom.ready,setStyle:c.dom.setStyle,getStyle:c.dom.getStyle,addClassName:c.dom.addClassName,hasClassName:c.dom.hasClassName,removeClassName:c.dom.removeClassName,contains:c.dom.contains,position:c.dom.position,foreach:c.arr.foreach,isArray:c.arr.isArray,addEvent:c.evt.addEvent,removeEvent:c.evt.removeEvent,getEvent:c.evt.getEvent,stopEvent:c.evt.stopEvent,preventDefault:c.evt.preventDefault,getType:c.func.getType,funcEmpty:c.func.empty,jsonp:c.io.jsonp,scriptLoader:c.io.scriptLoader,merge:c.json.merge,jsonToQuery:c.json.jsonToQuery,beget:c.obj.beget,parseParam:c.obj.parseParam,bLength:c.str.bLength,leftB:c.str.leftB,trim:c.str.trim,encodeHTML:c.str.encodeHTML,cookie:c.util.cookie,drag:c.util.drag,listener:c.util.listener,browser:c.util.browser,language:c.language,getUniqueKey:c.util.getUniqueKey};for(var b in d){if(d[b]){a.regShort(b,d[b])}}})();a.register("common.listener",function(c){var d={};var b={};b.define=function(f,g){if(d[f]!=null){throw"common.listener.define: 频道已被占用"}d[f]=g;var e={};e.register=function(i,h){if(d[f]==null){throw"common.listener.define: 频道未定义"}c.core.util.listener.register(f,i,h)};e.fire=function(h,i){if(d[f]==null){throw"commonlistener.define: 频道未定义"}c.core.util.listener.fire(f,h,i)};e.remove=function(i,h){c.core.util.listener.remove(f,i,h)};return e};return b});a.register("common.channel.plugin",function(b){return b.common.listener.define("common.channel.plugin",["outlogin_ready","plugin_ready","weibolist_show","weibolist_hide"])});a.register("kit.obj.append",function(b){return function(g){for(var f=1,d=arguments.length;f<d;f++){var c=arguments[f]||{};for(var e in c){g[e]=c[e]}}return g}});a.register("kit.dom.builder",function(c){var b=null;return function(d){var e=null;if(typeof(d)=="string"){if(!b){b=c.C("div")}b.innerHTML=d;e=b.children[0];b.removeChild(e);b.innerHTML=""}else{e=d}var g={};var f=e.getElementsByTagName("*");if(f.length>0){c.foreach(f,function(j){if(c.isNode(j)){var i=j.getAttribute("node-type");if(i){if(!g[i]){g[i]=[]}g[i].push(j)}}})}var h={};h.box=e;h.list=g;return h}});a.register("kit.dom.parseDOM",function(b){return function(d){for(var c in d){if(d[c]&&(d[c].length==1)){d[c]=d[c][0]}}return d}});a.register("kit.dom.loadStyle",function(e){var d;var c=e.funcEmpty;var b=e.core.util.browser;return function(g,n){var m,h,j=false,l=false;var k=e.parseParam({id:e.getUniqueKey(),timeout:30*1000,styleCheck:null,onLoad:c,onTimeout:c,props:{charset:"utf-8",rel:"stylesheet",media:"screen",type:"text/css"}},n);m=e.C("link");e.foreach(k.props,function(p,o){m[o]=p});m.id=k.id;m.href=g;var f=function(){clearInterval(h);if(!l&&!j){if(e.getType(k.onLoad)==="function"){setTimeout(k.onLoad,100)}}j=true};if(b.IE){m.onload=f}else{if(e.getType(k.styleCheck)==="function"){h=setInterval(function(){if(k.styleCheck()){f()}},10)}else{var i=document.createElement("img");i.onerror=f;i.src=g}}if(k.timeout&&k.onTimeout){setTimeout(function(){clearInterval(h);if(!j&&e.getType(k.onTimeout)==="function"){l=true;k.onTimeout()}},k.timeout)}if(!d){d=document.getElementsByTagName("head")[0]}d.appendChild(m)}});a.register("kit.dom.appendStyle",function(b){return function(f,c){var d=b.parseParam({autoAppend:true,target:null,type:"text/css"},c);var e;f=f||"";f=f.toString();if(b.isNode(d.target)&&d.target.tagName.toLowerCase()==="style"){e=d.target}else{e=document.createElement("style");e.setAttribute("type",d.type)}if(e.styleSheet){e.styleSheet.cssText=e.innerHTML+f}else{e.appendChild(document.createTextNode(f))}if(d.autoAppend){document.getElementsByTagName("head")[0].appendChild(e)}return e}});a.register("kit.util.makeReady",function(b){return function(d){var e=b.parseParam({timeout:30*1000,condition:b.funcEmpty,ready:b.funcEmpty},d);var c,f;return{reset:function(){if(c){c.length=0;c=null}if(f){clearTimeout(f);f=null}},exec:function(g){var h=this;if(b.getType(g)==="function"){if(e.condition()){g()}else{if(!c){c=[];c.push(g);if(!f){f=setTimeout(h.reset,e.timeout)}e.ready(function(){clearTimeout(f);f=null;while(b.getType(c)==="array"&&c.length>0){c.shift()()}})}else{c.push(g)}}}},destroy:function(){this.reset()}}}});a.register("comp.defaultStyle",function(c){var b=['.tn-title-login-custom{float:left!important;font-family: "Microsoft YaHei","微软雅黑","SimSun","宋体"!important;position:relative!important;}',".tn-title-login-custom .tn-user-custom{float:left!important;font-size:12px!important;}",".tn-title-login-custom .tn-user-greet{float:left!important;height:17px!important;padding:12px 0!important;width:51px!important; line-height:17px!important;overflow:hidden!important;}",".tn-title-login-custom .tn-tab-custom{position:relative!important;float:left!important;border-width:0 1px!important;border-style:solid!important;width:85px!important;height:17px!important;padding:12px 0!important;_padding:14px 0 10px!important;text-align:center!important;font-style:normal!important;text-decoration:none!important; vertical-align:top!important;}",".tn-title-login-custom .tn-tab-custom-login{width:57px!important;_float:left;}",".tn-title-login-custom .tn-tab-custom i{font-style:normal!important;}",".tn-title-login-custom .tn-tab-custom:hover{text-decoration:none!important;}",".tn-title-login-custom .tn-tab-custom .tn-new-custom{display:none;position:absolute!important;right:2px!important;margin-top:-10px!important;height:11px!important;width:13px!important;padding-left:3px!important;font-size:8px!important;overflow:hidden!important;line-height:10px!important;text-align:center!important;-webkit-text-size-adjust:none!important;font-style:normal!important;}",".tn-title-login-custom .tn-tab-custom .tn-arrow-custom{display: inline-block!important;font-size: 12px!important;height: 5px!important;line-height: 13px!important;margin: 0 0 0 5px!important;overflow: hidden!important;transform: none!important;vertical-align: middle!important;width:9px!important;font-style:normal!important;}",".tn-title-login-custom .tn-topmenulist-custom{position:absolute!important;right:0!important;top:41px!important;border-width:1px 1px 0!important;border-style:solid!important;width:85px!important;overflow:hidden!important;}",".tn-title-login-custom .tn-topmenulist-custom .tn-text-list{margin-bottom:-2px!important;margin:0!important;padding:0!important;}",".tn-title-login-custom .tn-topmenulist-custom li{border-bottom-width:1px!important;border-bottom-style:solid!important;line-height:31px!important; list-style:none!important;margin:0!important;padding:0!important;}",".tn-title-login-custom .tn-topmenulist-custom a{display:block!important;padding:0 15px!important;text-decoration:none!important;text-align:left!important;}",".tn-title-login-custom .tn-topmenulist-custom a em{float:right!important;font-style:normal!important;}",".tn-title-login-custom .tn-topmenulist-custom a:hover{text-decoration:none!important;}",".tn-title-login-custom .tn-topmenulist-custom a.tn-user-custom-logout{background:#f2f2f2!important;color:#0a8cd2!important;}",".tn-title-login-custom .tn-topmenulist-custom a.tn-user-custom-logout:hover{text-decoration:underline!important;}","/*可覆盖样式区域*/",".tn-title-login-custom .tn-user-custom{background:#f7f7f7;}",".tn-title-login-custom .tn-tab-custom{border-color:#f7f7f7;color:#ff8601;}",".tn-title-login-custom .tn-tab-custom:hover,",".tn-title-login-custom .tn-tab-custom-onmouse{background:#eaeaea;border-color:#ff8503;color:#ff8601;}",".tn-title-login-custom .tn-tab-custom .tn-new-custom{background:url(http://i.sso.sina.com.cn/images/login/icon_custom.png) no-repeat 0 -30px;color:#fff;text-align:center;-webkit-text-size-adjust: none;}",".tn-title-login-custom .tn-tab-custom .tn-arrow-custom{ background:url(http://i.sso.sina.com.cn/images/login/icon_custom.png) no-repeat scroll 0 0 transparent; }",".tn-title-login-custom .tn-topmenulist-custom{border-color:#ff8601;background:#fff;}",".tn-title-login-custom .tn-topmenulist-custom li{border-bottom-color:#ff8601;}",".tn-title-login-custom .tn-topmenulist-custom a{color:#000;}",".tn-title-login-custom .tn-topmenulist-custom a em{color:#ff8603;}",".tn-title-login-custom .tn-topmenulist-custom a:hover{background:#fff6d9;color:#ff8601;}"];return{get:function(){if(typeof b!=="string"){b=b.join("\n")}return b}}});a.register("comp.userPanel",function(g){var u=g.core.json.merge,f=g.core.util.language,p=g.core.dom.contains,b=g.kit.dom.appendStyle,d=g.kit.dom.builder,h=g.kit.dom.parseDOM,m=g.kit.dom.loadStyle,s=g.kit.util.makeReady,q=g.comp.defaultStyle,k=g.common.channel.plugin;var o={};var j={};var l=0;var n={};var c={layer:['<div class="top-nav">','<div class="tn-title-login-custom" node-type="userInfoContainer">','<div class="tn-user-custom" >','<a href="javascript:void(0);" class="tn-tab-custom tn-tab-custom-login" node-type="login"><i><span>#L{登录}</span></i></a>','<span class="tn-user-greet" style="display:none;" node-type="greet">#L{欢迎你，}</span>','<a node-type="nickCon" style="display:none;" href="http://weibo.com" target="_blank" class="tn-tab-custom"><i><span node-type="nick">&nbsp;</span>','<em class="tn-new-custom" node-type="totalMsg"></em>','<em class="tn-arrow tn-arrow-custom"></em></i></a>','<div class="tn-topmenulist-custom" node-type="infoList" style="display:none;">','<ul class="tn-text-list">','<li><a href="http://weibo.com/messages?topnav=1&wvr=4" target="_blank"><em node-type="pm"></em>#L{私信}</a></li>','<li><a href="http://weibo.com/comment/inbox?topnav=1&wvr=4&f=1" target="_blank"><em node-type="comment"></em>#L{评论}</a></li>','<li><a href="http://weibo.com/at/weibo?topnav=1&wvr=4" target="_blank"><em node-type="atme"></em>#L{@我}</a></li>','<li><a href="javascript:void(0);" node-type="logout" class="tn-user-custom-logout">#L{退出}</a></li>',"</ul>","</div>","</div>",'<div node-type="css_check" class="userpanel-checkload" style="display:none;"></div>',"</div>","</div>"].join("")};var i={};var r={};var e={container:{node:""},html:{layer:c.layer},extra:{css:"",outlogin:"http://i.sso.sina.com.cn/js/outlogin_layer.js",weibo:"https://rm.api.weibo.com/2/remind/unread_count.json"},outloginLayer:{ready:g.funcEmpty,options:{},triggerEvent:"click",loginBtns:[],setPos:false},style:{zIndex:1000,nickHoverCls:"tn-tab-custom-onmouse",itemHoverCls:""},language:{end:""}};g.$LANG=e.language;i.set=function(x,v){x=x.toString();v=v||{};var w=e[x];if(w){w=u(w,v);e[x]=w}return i};i.getOutLogin=function(){return window.SINA_OUTLOGIN_LAYER};i.init=function(){r.prepare()};r.prepareOutLogin=function(v){if(!r.outloginReady){r.outloginReady=s({condition:function(){return !!window.SINA_OUTLOGIN_LAYER},ready:function(w){g.scriptLoader({timeout:10*1000,url:e.extra.outlogin,onComplete:w,onTimeout:function(){r.outloginReady.reset()}})}})}r.outloginReady.exec(v)};var t=false;r.prepareCss=function(v){if(!r.cssReady){r.cssReady=s({condition:function(){return t},ready:function(w){b(q.get());if(e.extra.css){m(e.extra.css,{timeout:10*1000,styleCheck:function(){if(g.isNode(o.css_check)){var x=g.getStyle(o.css_check,"width");if(x==="123px"){return true}}},onLoad:function(){t=true;w()},onTimeout:function(){r.cssReady.reset()}})}else{t=true;w()}}})}r.cssReady.exec(v)};r.prepare=function(v){g.Ready(function(){r.build();r.prepareCss(function(){r.prepareOutLogin(function(){j=i.getOutLogin();r.bindEvent();if(g.getType(e.outloginLayer.ready)==="function"){e.outloginLayer.ready()}k.fire("outlogin_ready");if(g.getType(v)==="function"){v()}})})})};r.build=function(){r.parseDom();r.insert()};r.parseDom=function(){if(!g.isNode(o.box)){var v=f(e.html.layer,e.language);var w=d(v);i.nodes=o=h(w.list);o.box=w.box}};r.insert=function(){if(!g.isNode(o.box)){return}var v=e.container.node;if(!g.isNode(v)){v=document.body}v.appendChild(o.box);g.setStyle(o.box,"display","none")};r.displayLogin=function(){g.setStyle(o.login,"display","");g.setStyle(o.nickCon,"display","none");g.setStyle(o.greet,"display","none")};r.displayUserInfo=function(){g.setStyle(o.login,"display","none");g.setStyle(o.nickCon,"display","");g.setStyle(o.greet,"display","");if(e.style.nickHoverCls){g.removeClassName(o.nickCon,e.style.nickHoverCls)}};r.bindEvent=function(){g.setStyle(o.box,"display","");j.register("layer_ready",function(){j.set("drag",{enable:false});if(!e.outloginLayer.setPos){r.caculateLoginLayerPos();j.set("plugin",{position:"custom"})}g.addEvent(o.login,"click",function(){if(e.style.nickHoverCls){g.addClassName(o.login,e.style.nickHoverCls)}if(!e.outloginLayer.setPos){r.setLoginLayerPos()}j.show()});var v={sourceNode:o.login,layerNode:j.nodes.box,mouseoverFun:function(){if(e.style.nickHoverCls){g.addClassName(o.login,e.style.nickHoverCls)}j.show()},mouseoutFun:function(){if(e.style.nickHoverCls){g.removeClassName(o.login,e.style.nickHoverCls)}j.hide()}};r.loginHover=r.hoverEvents(v);var v={sourceNode:o.nickCon,layerNode:o.infoList,mouseoverFun:r.show,mouseoutFun:r.hide};r.hoverEvents(v);r.bindMsgClick();var w=function(B){if(r.loginHover){clearTimeout(r.loginHover.timer)}var B=g.getEvent(B);var z=B.target||B.srcElement;var y=true;var C=e.outloginLayer.loginBtns;for(var x=0;x<C.length;x++){var A=C[x];if(!g.isNode(A)){A=g.E(A)}if(g.contains(A,z)||A==z){y=false}}if(g.contains(o.box,z)||o.box==z){y=false}if(!g.contains(j.nodes.box,z)&&y&&z!==j.nodes.box){if(e.style.nickHoverCls){g.removeClassName(o.login,e.style.nickHoverCls)}setTimeout(j.hide,10)}};g.addEvent(document,"touchstart",w);g.addEvent(document,"mousedown",w);k.fire("plugin_ready")}).register("login_success",function(){r.displayUserInfo();r.checkMsgList();r.getNickName()}).register("logout_success",function(){r.resetInfoList();clearTimeout(r.timeout);g.removeClassName(o.nickCon,e.style.nickHoverCls);g.setStyle(o.infoList,"display","none");r.displayLogin();o.nick.innerHTML="&nbsp;";o.nickCon.href="http://weibo.com"})};r.resetInfoList=function(){l=0;g.setStyle(o.totalMsg,"display","none");o.totalMsg.innerHTML="";o.pm.innerHTML="";o.comment.innerHTML="";o.atme.innerHTML=""};r.caculateLoginLayerPos=function(){g.setStyle(j.nodes.box,"position","absolute");g.setStyle(j.nodes.box,"top","-1000px");g.setStyle(j.nodes.box,"left","-1000px");g.setStyle(j.nodes.box,"display","");var w=o.login.offsetWidth,v=o.box.offsetHeight||o.userInfoContainer.offsetHeight,y=j.nodes.box.offsetWidth;w=parseInt(w,10);v=parseInt(v,10);y=parseInt(y,10);var x=g.position(o.login);var z=x.l+w-y;n.left=z+210+"px";n.top=v+"px"};r.setLoginLayerPos=function(){if(n){j.set("styles",{top:n.top,left:n.left})}};r.bindMsgClick=function(){g.addEvent(o.pm.parentNode,"click",function(){l-=parseInt(o.pm.innerHTML,10);o.pm.innerHTML="";v()});g.addEvent(o.comment.parentNode,"click",function(){l-=parseInt(o.comment.innerHTML,10);o.comment.innerHTML="";v()});g.addEvent(o.atme.parentNode,"click",function(){l-=parseInt(o.atme.innerHTML,10);o.atme.innerHTML="";v()});g.addEvent(o.logout,"click",function(){clearTimeout(r.timeout);r.resetInfoList();j.logout()});function v(){if(l>0){g.setStyle(o.totalMsg,"display","inline-block");o.totalMsg.innerHTML=l}else{g.setStyle(o.totalMsg,"display","none");o.totalMsg.innerHTML=""}}};r.checkMsgList=function(){var v=j.getSinaCookie();if(v&&v.uid){try{g.jsonp({timeout:59*1000,url:e.extra.weibo,args:{source:"2751753920",uid:v.uid},onComplete:function(x){r.renderMsgList(x.data)},onTimeout:function(x){}})}catch(w){}}r.timeout=setTimeout(arguments.callee,60*1000)};r.renderMsgList=function(w){var v=j.getSinaCookie();if(v&&v.uid){l=w.dm+w.cmt+w.mention_cmt+w.mention_status;if(l){g.setStyle(o.totalMsg,"display","inline-block");o.totalMsg.innerHTML=l;o.pm.innerHTML=w.dm?w.dm:"";o.comment.innerHTML=w.cmt?w.cmt:"";o.atme.innerHTML=(w.mention_status+w.mention_cmt)?(w.mention_status+w.mention_cmt):""}else{g.setStyle(o.totalMsg,"display","none");r.resetInfoList()}}};r.show=function(){try{g.preventDefault()}catch(w){}var v=r.isDisplay();if(!v){if(o.infoList){g.setStyle(o.infoList,"display","")}if(e.style.nickHoverCls){g.addClassName(o.nickCon,e.style.nickHoverCls)}}k.fire("weibolist_show")};r.hide=function(){try{g.preventDefault()}catch(v){}if(o.infoList){g.setStyle(o.infoList,"display","none")}if(e.style.nickHoverCls){g.removeClassName(o.nickCon,e.style.nickHoverCls)}k.fire("weibolist_hide")};r.isDisplay=function(){return o.infoList?g.getStyle(o.infoList,"display")!=="none":false};r.hoverEvents=function(v){var w={};var x=100,C;var B=[];var y={sourceNode:"",layerNode:"",mouseoverFun:g.funcEmpty,mouseoutFun:g.funcEmpty};y=u(y,v);y.layerNode.toggleType="nomarl";g.addEvent(y.sourceNode,"mouseover",function(D){for(var E=0;E<B.length;E++){clearTimeout(B[E])}B=[];var F=D.fromElement||D.relatedTarget;if(!g.isNode(F)){return}if(!(y.sourceNode==F||p(y.sourceNode,F))){y.layerNode.toggleType="hover";w.visible=true;if(!e.outloginLayer.setPos&&y.sourceNode==o.login){r.setLoginLayerPos()}A()}});g.addEvent(y.sourceNode,"mouseout",function(D){var E=D.toElement||D.relatedTarget||D.srcElement;if(!g.isNode(E)){return}if(!(y.sourceNode==E||p(y.sourceNode,E))){C=setTimeout(function(){w.visible=false;A()},x);B.push(C)}});g.addEvent(y.layerNode,"mouseover",function(D){for(var E=0;E<B.length;E++){clearTimeout(B[E])}B=[];var F=D.fromElement||D.relatedTarget;if(!g.isNode(F)){return}if(!(y.layerNode==F||p(y.layerNode,F))){w.visible=true;A()}});g.addEvent(y.layerNode,"mouseout",function(D){var E=D.toElement||D.relatedTarget||D.srcElement;if(!g.isNode(E)){return}if(!(y.layerNode==E||p(y.layerNode,E))){C=setTimeout(function(){w.visible=false;A()},x);B.push(C)}});function A(){if(w.visible){if(w.timer){clearTimeout(w.timer);delete w.timer}y.mouseoverFun()}else{w.timer=setTimeout(function(){if(y.layerNode.toggleType==="hover"&&!z()){y.mouseoutFun()}delete w.timer},500)}}function z(){if(j.isLogin()){return false}else{var E=document.activeElement;var F=j.nodes.loginname.value,D=j.nodes.password.value;return(F||D||g.contains(j.nodes.box,E))}}return w};r.getNickName=function(){var w=j.getSinaCookie();if(w&&w.uid){j.getWeiboInfo({timeout:30*1000,onSuccess:function(x){o.nick.innerHTML=v(x.data.name);o.nickCon.href="http://weibo.com/u/"+w.uid},onFailure:function(){o.nick.innerHTML=v(w.nick);o.pm.parentNode.href="http://weibo.com";o.comment.parentNode.href="http://weibo.com";o.atme.parentNode.href="http://weibo.com"}})}function v(x){if(g.bLength(x)>8){var x=g.leftB(x,8);return x+"..."}return x}};i.showOutLoginLayer=function(){if(!j.isLogin()){if(e.style.nickHoverCls){g.addClassName(o.login,e.style.nickHoverCls)}if(!e.outloginLayer.setPos){r.setLoginLayerPos()}j.show()}};i.register=function(w,v){k.register(w,v);return i};i.remove=function(w,v){k.remove(w,v);return i};i.nodes=o;i.options=e;return i});(function(c){var b=a.comp.userPanel;b.listener=c.common.channel.plugin;b.getVersion=function(){return"1.0.2"};b.STK=a;this.SINA_USER_PANEL=b}).call(this,a)}).call(this);